{"version":3,"file":"selector.min.js","sources":["../src/selector.js"],"sourcesContent":["// This file is part of Moodle - https://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/*\n * @package    mod_clickview\n * @copyright  2021 ClickView Pty. Limited <info@clickview.com.au>\n * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([], function() {\n    return {\n        init: function() {\n            var displayTitle = document.getElementById('id_name'),\n                pluginFrame = document.getElementById('clickview_iframe'),\n                eventsApi = new CVEventsApi(pluginFrame.contentWindow), // eslint-disable-line\n                userSetTitle = false;\n\n            if (displayTitle) {\n                displayTitle.onkeyup = function(e) {\n                    if (e.target.value) {\n                        userSetTitle = true;\n                    }\n                };\n            }\n\n            eventsApi.on('cv-lms-addvideo', function(event, detail) {\n                document.getElementsByName('cv-name')[0].value = detail.title;\n                document.getElementsByName('cv-width')[0].value = detail.embed.width;\n                document.getElementsByName('cv-height')[0].value = detail.embed.height;\n                document.getElementsByName('cv-autoplay')[0].value = (detail.embed.autoplay ? '1' : '0');\n                document.getElementsByName('cv-embedhtml')[0].value = detail.embedHtml;\n                document.getElementsByName('cv-embedlink')[0].value = detail.embedLink;\n                document.getElementsByName('cv-thumbnailurl')[0].value = detail.thumbnailUrl;\n\n                if (displayTitle && !userSetTitle) {\n                    displayTitle.value = detail.title;\n                }\n\n                var selectedvideo = '<img class=\"img-responsive img-thumbnail\" ' +\n                    'src=\"' + detail.thumbnailUrl + '\"' +\n                    'alt=\"' + detail.title + '\"><br>' +\n                    '<span>' + detail.title + '</span>';\n\n                var container = document.getElementById('cv_selectedvideo');\n                container.innerHTML = selectedvideo;\n            }, true);\n        }\n    };\n});"],"names":["define","init","displayTitle","document","getElementById","pluginFrame","eventsApi","CVEventsApi","contentWindow","userSetTitle","onkeyup","e","target","value","on","event","detail","getElementsByName","title","embed","width","height","autoplay","embedHtml","embedLink","thumbnailUrl","selectedvideo","innerHTML"],"mappings":";;;;;AAoBAA,gCAAO,IAAI,iBACA,CACHC,KAAM,eACEC,aAAeC,SAASC,eAAe,WACvCC,YAAcF,SAASC,eAAe,oBACtCE,UAAY,IAAIC,YAAYF,YAAYG,eACxCC,cAAe,EAEfP,eACAA,aAAaQ,QAAU,SAASC,GACxBA,EAAEC,OAAOC,QACTJ,cAAe,KAK3BH,UAAUQ,GAAG,mBAAmB,SAASC,MAAOC,QAC5Cb,SAASc,kBAAkB,WAAW,GAAGJ,MAAQG,OAAOE,MACxDf,SAASc,kBAAkB,YAAY,GAAGJ,MAAQG,OAAOG,MAAMC,MAC/DjB,SAASc,kBAAkB,aAAa,GAAGJ,MAAQG,OAAOG,MAAME,OAChElB,SAASc,kBAAkB,eAAe,GAAGJ,MAASG,OAAOG,MAAMG,SAAW,IAAM,IACpFnB,SAASc,kBAAkB,gBAAgB,GAAGJ,MAAQG,OAAOO,UAC7DpB,SAASc,kBAAkB,gBAAgB,GAAGJ,MAAQG,OAAOQ,UAC7DrB,SAASc,kBAAkB,mBAAmB,GAAGJ,MAAQG,OAAOS,aAE5DvB,eAAiBO,eACjBP,aAAaW,MAAQG,OAAOE,WAG5BQ,cAAgB,kDACNV,OAAOS,aADD,SAENT,OAAOE,MAFD,eAGLF,OAAOE,MAAQ,UAEdf,SAASC,eAAe,oBAC9BuB,UAAYD,iBACvB"}